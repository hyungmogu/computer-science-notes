\documentclass[12pt]{article}
\usepackage[margin=2.5cm]{geometry}
\usepackage{titling}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{mdframed}
\usepackage{listings}
\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=1
}

\lstset{style=mystyle}

\predate{}
\postdate{}

\begin{document}
\title{Lab 2 Task 3 Solution}
\date{}
\maketitle


\section*{3) Become familiar with function \textit{main}}
\begin{enumerate}[1.]
    \item Where is a \textit{NumberGame} constructed?

    \begin{itemize}
        \item
        By observation, we can conclude a \textit{NumberGame} constructed
        inside function \textit{main}

        \begin{lstlisting}[language=Python]
        def main() -> None:
            ...
            while True:
                g = NumberGame(goal, minimum, maximum, (p1, p2)) #<- Here!!
                winner = g.play()
                print(f'And {winner} is the winner!!!')
                print(p1)
                print(p2)
                again = input('Again? (y/n) ')
                if again != 'y':
                    return

        \end{lstlisting}
    \end{itemize}

    \item This function calls \textit{g.play} repeatedly in a loop. What about the
    game can change each time \textit{g.play} is called: the goal, the min or max
    move, the players, the moves?

    \begin{itemize}
        \item

        By observation, we can conclude that

        \begin{enumerate}[1.]
            \item the goal doesn't change
            \item the min or max move don't change
            \item the current player change as a result of whose\_turn method.

            \begin{lstlisting}[language=Python]
            def play(self) -> str:
                ...
                while self.current < self.goal:
                    self.play_one_turn() # <- In here
                ...
                winner = self.whose_turn(self.turn - 1)
                return winner.namePlayers

            def play_one_turn(self) -> None:
                ...
                next_player = self.whose_turn(self.turn) # <- Here!!
                amount = next_player.move(
                    self.current,
                    self.min_step,
                    self.max_step,
                    self.goal
                )
                self.current += amount
                self.turn += 1

                print(f'{next_player.name} moves {amount}.')
                print(f'Total is now {self.current}.')


            def whose_turn(self, turn: int) -> Player:
                ...
                if turn % 2 == 0:
                    return self.players[0]
                else:
                    return self.players[1]

            \end{lstlisting}

            \item the move changes by the \textit{move} method in \textit{play\_one\_turn}.

            \begin{lstlisting}[language=Python]
                def play(self) -> str:
                    ...
                    while self.current < self.goal:
                        self.play_one_turn()
                    ...
                    winner = self.whose_turn(self.turn - 1)
                    return winner.namePlayers

                def play_one_turn(self) -> None:
                    ...
                    next_player = self.whose_turn(self.turn)
                    amount = next_player.move( # <- Here!!
                        self.current,
                        self.min_step,
                        self.max_step,
                        self.goal
                    )
                    self.current += amount
                    self.turn += 1

                    print(f'{next_player.name} moves {amount}.')
                    print(f'Total is now {self.current}.')

                \end{lstlisting}
        \end{enumerate}
    \end{itemize}

    \item List all the places in this function where a \textit{Player} is stored,
    an instance attribute of \textit{Player} is accessed or set, or a method is
    called on a \textit{Player}.

    \bigskip

    \begin{mdframed}
        \underline{\textbf{Rough Work:}}

        \bigskip

        We need to find all places in this function where \textit{Player} is stored,
        where an instance attribute of \textit{Player} is accessed or set, or where
        a method is called on a \textit{Player}.

        \bigskip

        \begin{enumerate}[1.]
            \item Find where \textit{Player} is stored.

            \bigskip

            \begin{mdframed}

            First, we need to find where \textit{Player} is stored.

            \bigskip

            Because we know from code that the third argument in \textit{NumberGame}
            is of type Tuple[Player, Player], we can conclude \textit{Player} is
            stored inside variables \textit{p1} and \textit{p2}

            \begin{lstlisting}[language=Python]
            def main() -> None:
                """Play multiple rounds of a NumberGame based on user input settings.
                """
                goal = int(input('Enter goal amount: '))
                minimum = int(input('Enter minimum move: '))
                maximum = int(input('Enter maximum move: '))
                p1 = make_player('p1') # <- Here!!
                p2 = make_player('p2') # <- Here!!
                while True:
                    g = NumberGame(goal, minimum, maximum, (p1, p2)) # <- Here!!
                    winner = g.play()
                    print(f'And {winner} is the winner!!!')
                    print(p1)
                    print(p2)
                    again = input('Again? (y/n) ')
                    if again != 'y':
                        return
            \end{lstlisting}


            \end{mdframed}

            \item Find where the instance attribute of \textit{Player} is accessed or set.
            \bigskip

            \begin{mdframed}

            Second, we need to find where the instance attribute of \textit{Player} is accessed or set.

            \bigskip

            By observation, we can conclude there are two places where one or more instance
            attributes of \textit{Player} is accessed or set.

            \bigskip

            The first one is inside \textit{play} method.

            \begin{lstlisting}[language=Python]
            class NumberGame:
                ...
                def play(self) -> str:
                    ...
                    winner = self.whose_turn(self.turn - 1)
                    return winner.name # <- Here!!
            \end{lstlisting}

            \bigskip

            The second one is inside \textit{play\_one\_turn} method.

            \begin{lstlisting}[language=Python]
            class NumberGame:
                ...
                def play_one_turn(self) -> None:
                    ...
                    print(f'{next_player.name} moves {amount}.') # <- Here!!
                    print(f'Total is now {self.current}.')
            \end{lstlisting}

            \end{mdframed}

            \item Find where a method of \textit{Player} is called.

            \bigskip

            \begin{mdframed}

            Finally, we need to find where method of \textit{Player} is
            called.

            \bigskip

            By observation, we can conclude one method of \textit{Player}
            is used, and it is called inside \textit{play\_one\_turn} method.

            \bigskip

            \begin{lstlisting}[language=Python]
            class NumberGame:
                ...
                def play_one_turn(self) -> None:
                    next_player = self.whose_turn(self.turn)
                    amount = next_player.move( # <- Here!!
                        self.current,
                        self.min_step,
                        self.max_step,
                        self.goal
                    )
            \end{lstlisting}

            \end{mdframed}

        \end{enumerate}

    \end{mdframed}


\end{enumerate}

\end{document}
