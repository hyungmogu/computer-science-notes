\documentclass[12pt]{article}
\usepackage[margin=2.5cm]{geometry}
\usepackage{enumerate}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{fancyhdr}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mdframed}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{listings}
\usepackage{xcolor}
\usepackage[utf]{kotex}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=1
}

\lstset{style=mystyle}

\begin{document}
\title{CSC148 Worksheet 5 Solution}
\author{Hyungmo Gu}
\maketitle

\section*{Question 1}

\begin{lstlisting}[language=Python]
    """
    from datetime import date, timedelta

    ...

    misbehaved_1 = Tweet('', date.today(), 'test')
    misbehaved.like(-1)

    yesterday = date.today() - timedelta(days=1)
    misbehaved_2 = Tweet('john', yesterday 'test')

    misbehaved_3 = Tweet('john', date.today(), '')
    """
\end{lstlisting}

\bigskip

\begin{mdframed}
    \underline{\textbf{Correct Solution:}}

    \bigskip

    \begin{lstlisting}[language=Python]
        """
        from datetime import date, timedelta

        ...

        misbehaved_1 = Tweet('', date.today(), 'test')
        misbehaved.like(-1)

        yesterday = date.today() - timedelta(days=1)
        misbehaved_2 = Tweet('john', yesterday 'test')

        misbehaved_3 = Tweet('john', date.today(), '')

        misbehaved_4 = Tweet('john doe', date.today(), 'test') # More solution!!
        """
    \end{lstlisting}

\end{mdframed}

\section*{Question 2}
\begin{itemize}
    \item A tweet must receive positive number of likes
    \item A tweet must have user id without spaces
\end{itemize}

\begin{mdframed}
    \underline{\textbf{Correct Solution:}}

    \bigskip

    \begin{itemize}
        \item A tweet must receive \color{red}non-negative\color{black}\:number of likes
        \item \color{red}A tweet user id must not be empty.\color{black}
        \item A tweet must have user id without spaces
        \item \color{red} A tweet must have content length less than or equal to 280 characters\color{black}
    \end{itemize}

\end{mdframed}

\section*{Question 3}
\begin{itemize}
    \item Fix for the property `a tweet must receive positive number of likes'

    \begin{lstlisting}[language=Python]
    class Tweet:
        ...

        def like(self, n: int) -> None:
            """Record the fact that this tweet received <n> likes.
            These likes are in addition to the ones <self> already has.
            """

            if n < 0:
                raise ValueError('n must be non-negative value')

            self.likes += n
    \end{lstlisting}

    \bigskip

    \begin{mdframed}
        \underline{\textbf{Correct Solution:}}

        \bigskip

        \begin{lstlisting}[language=Python]
            class Tweet:
            ...

            def like(self, n: int) -> None:
                """Record the fact that this tweet received <n> likes.
                These likes are in addition to the ones <self> already has.

                Precondition: n >= 0 # Correct Solution
                """

                self.likes += n
        \end{lstlisting}
    \end{mdframed}

    \item Fix for the property `a tweet user id must not be empty.'

    \begin{lstlisting}[language=Python]
    class Tweet:
        ...

        def __init__(self, who: str, when: date, what: str) -> None:
            """Initialize a new Tweet.
            """

            if who.strip() == '':
                raise ValueError("variable 'who' must not be empty")

            self.userid = who
            self.content = what
            self.created_at = when
            self.likes = 0
    \end{lstlisting}

    \bigskip

    \begin{mdframed}
        \underline{\textbf{Correct Solution:}}

        \bigskip

        \begin{lstlisting}[language=Python]
        class Tweet:
            ...

            def __init__(self, who: str, when: date, what: str) -> None:
                """Initialize a new Tweet.

                Precondition: who.strip() != '' # Correct Solution
                """

                self.userid = who
                self.content = what
                self.created_at = when
                self.likes = 0
        \end{lstlisting}
    \end{mdframed}

    \item Fix for the property `a tweet must have user id without spaces'

    \begin{lstlisting}[language=Python]
    class Tweet:
        ...

        def __init__(self, who: str, when: date, what: str) -> None:
            """Initialize a new Tweet.
            """

            if ' ' in who:
                raise ValueError("variable 'who' must not have spaces")

            self.userid = who
            self.content = what
            self.created_at = when
            self.likes = 0
    \end{lstlisting}

    \bigskip

    \begin{mdframed}
        \underline{\textbf{Correct Solution:}}

        \bigskip

        \begin{lstlisting}[language=Python]
        class Tweet:
            ...

            def __init__(self, who: str, when: date, what: str) -> None:
                """Initialize a new Tweet.

                Precondition: ' ' not in who # Correct Solution
                """

                self.userid = who
                self.content = what
                self.created_at = when
                self.likes = 0
        \end{lstlisting}
    \end{mdframed}


    \item Fix for the property 'a tweet must have content length less than or
    equal to 280 characters'

    \begin{lstlisting}[language=Python]
    class Tweet:
        ...

        def __init__(self, who: str, when: date, what: str) -> None:
            """Initialize a new Tweet.
            """

            ...

            if len(what) > 280:
                raise ValueError("variable 'what' must be 280 characters or less")

            self.userid = who
            self.content = what
            self.created_at = when
            self.likes = 0
    \end{lstlisting}

    \bigskip

    \begin{mdframed}
        \underline{\textbf{Correct Solution:}}

        \bigskip

        \begin{lstlisting}[language=Python]
        class Tweet:
            ...

            def __init__(self, who: str, when: date, what: str) -> None:
                """Initialize a new Tweet.

                Precondition: len(what) <= 280 # Correct Solution
                """

                self.userid = who
                self.content = what
                self.created_at = when
                self.likes = 0
        \end{lstlisting}
    \end{mdframed}

\end{itemize}

\bigskip

\underline{\textbf{Notes:}}

\begin{itemize}
    \item Learned that `Precondition: len(what) $<=$ 280' is called \textbf{representational invariant}.
    \item Learned that \textbf{representational invariant} is a property of instance attribute that
    every class must satisfy.
\end{itemize}

\bigskip

\section*{Question 4}
\begin{enumerate}[a.]
    \item

    It is insufficient to implement the \textit{best\_percentage}. Consider the
    following example

    \bigskip

    \begin{enumerate}[1.]
        \item One or more elements in \textless teams\textgreater with empty
        strings (i.e. [`', `', `'])
        \item One or more elements in \textless teams\textgreater with same
        name (i.e. [`a', `a', `b'])
        \item \textless team1\textgreater or \textless team2\textgreater as
        empty string (i.e. team1 = `', team2 = `')
        \item \textless team1\textgreater or \textless team2\textgreater containing
        the same value (i.e. team1 = `a', team2 = `a')
        \item \textless score1\textgreater or \textless score2\textgreater as
        negative value (i.e. score1 = -1, score2 = -4)
    \end{enumerate}

    \newpage

    \begin{mdframed}
        \underline{\textbf{Attempt 2:}}

        \bigskip

        It is insufficient to implement the \textit{best\_percentage}. Consider the
        following example

        \bigskip

        \begin{enumerate}[1.]
            \item One or more elements in \textless teams\textgreater with empty
            strings (i.e. [`', `', `'])
            \begin{itemize}
                \item In this case, only one team will be added to dictionary.
                This would result in \textless team1\textgreater and
                \textless team2\textgreater being the same value. This results in
                the misbehavior of calculating tournament score based on the
                same team.
            \end{itemize}

            \item All elements in \textless teams\textgreater with same
            name (i.e. [`a', `a', `a'])
            \begin{itemize}
                \item In this case, this leads to the same misbehavior as case 1.
            \end{itemize}
            \item \textless team1\textgreater or \textless team2\textgreater as
            empty string or as same value (i.e.1 team1 = `', team2 = `'), (i.e.2
            team1 = `a', team2 = `a')
            \begin{itemize}
                \item In this case, the instance attribute leads to undesired behavior
                of calculating tournament score based on the same team.
            \end{itemize}
        \end{enumerate}
    \end{mdframed}

    \item

    One example is \textit{t.record\_game(`a',`b',0,0)}.

    \bigskip

    The following precondition should be added such that the input attributes
    support the statistics.

    \begin{lstlisting}[language=Python]
    def record_game(self, team1, team2, score1, score2):
        """
        ...

        Precondition: team1 and team2 are both in this tournament.
        Precondition: <score1> != <score2>
        """

    \end{lstlisting}

    \item

    When instance attributes are changed, relevant pre-conditions and post-conditions
    become invalidated, and this would result in one or more methods to misbehave.

\end{enumerate}

\end{document}