\documentclass[12pt]{article}
\usepackage[margin=2.5cm]{geometry}
\usepackage{enumerate}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{fancyhdr}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mdframed}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{adjustbox}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{booktabs}
\usepackage[utf]{kotex}
\usepackage{hyperref}
\usepackage{soul}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=1
}

\lstset{style=mystyle}

\pagestyle{fancy}
\renewcommand{\headrulewidth}{0.4pt}
\lhead{CSC 343}
\rhead{Assignment 1 Solution}

\begin{document}
\title{CSC343 Assignment 1 Solution}
\maketitle

\section*{Warm Up}

\begin{enumerate}[1.]
    \item What does this integrity constraint mean? $\sigma_{follower=followed}Follows = \emptyset$

    \bigskip

    \begin{mdframed}
    Means there is no result in a query where user follow himself/herself
    \end{mdframed}

    \item Would it be a good idea to define the Follows relation like this? Follows()\underline{follower}, \underline{followed}, start)

    \bigskip

    \begin{mdframed}
    Omitted for now
    \end{mdframed}

    \item Can the database represent a single post that has multiple comments?

    \bigskip

    \begin{mdframed}
        Yes.

        \bigskip

        Create two relations Comment(\underline{pid, commenter, when}, text) and
        Post(\underline{pid}, uid, when, location, caption). Set \textit{pid} in
        comment to be the \text{pid} of Post.

        \bigskip

        Since primary key of Comment is \textit{pid, commenter, when}, comments
        can have multiple entires with the same \textit{pid}.

        \bigskip

        On the other hand, since \textit{pid} in Post is the only primary key,
        it's value must be non-repeating.
    \end{mdframed}

    \item Can the database represent multiple comments from the same user on one post?

    \bigskip

    \begin{mdframed}
        Yes.

        \bigskip

        The PRIMARY KEY of Comment(\ul{pid, commenter, when}, text)
        depends on \ul{pid, commenter, when}.

        \bigskip

        By definition of PRIMARY KEY, the entry with the same pid, commenter, and when cannot exist.

        \bigskip

        Since pid and commenter are the same in this case, as long as when is different,
        the PRIMARY KEY condition will remain valid.
    \end{mdframed}

    \item How does the schema allow \textit{any} number of photos or videos to be
    inclyded in one story, but restrict the user to having only one profile photo?

    \bigskip

    \begin{mdframed}

    The user is restricted to having one profile photo since the attribute
    \textit{photo} contains only the URL of user photo.

    \bigskip

    On the other hand, a story is allowed to have multiple videos or photos, since
    its list of video and photo urls are defined in relation SIncludes, and it's PRIMARY KEY
    depends on two attributes \textit{sid} and \textit{url}.

    \bigskip

    So, as long as there are no entries in SIncludes with the repeating value of
    \textit{url}, a story can have as many photos and video urls.
    \end{mdframed}

    \item Can the database represent that a user likes the same post more than once?
    (If not, how would you change the schema to allow this?)

    \bigskip

    \begin{mdframed}

        No.

        \bigskip

        To like the same post by one person more than once, the matching values of
        the attributes \textit{liker} and \textit{pid} need to appear more than once in
        Relation Likes.

        \bigskip

        Since, \textit{pid} and \textit{liker} are together set as PRIMARY KEY, this
        is not allowed.

    \end{mdframed}
\end{enumerate}

\section*{Part 1}

\begin{enumerate}[1.]
    \item

    \bigskip

    \underline{\textbf{Rough Work:}}

    \bigskip

    \begin{enumerate}[1.]
        \item Find all users who liked a post

        \begin{mdframed}

        \end{mdframed}
    \end{enumerate}

\end{enumerate}

\end{document}